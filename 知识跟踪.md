# 知识跟踪

## Flaky Test

Ref:

- [Flaky Tests - A War that Never Ends](https://hackernoon.com/flaky-tests-a-war-that-never-ends-9aa32fdef359)
- [Flaky tests](https://docs.gitlab.com/ee/development/testing_guide/flaky_tests.html)

### What is a flaky test?

A flaky test is a test which could fail or pass for the same configuration. Such behavior could be harmful to developers because test failures do not always indicate bugs in the code.

### Common flaky tests

how you could introduce a flaky test? Let’s see some common reasons a test could be flaky:

- Concurrency
- Caching
- Setup — Cleanup state
- Dynamic content
- Time bombs
- Infrastructure issues
- 3rd party systems


## Tracestate

- https://github.com/census-instrumentation/opencensus-proto/blob/master/gen-go/trace/v1/trace.pb.go#L139
- https://github.com/census-instrumentation/opencensus-proto/blob/master/gen-go/trace/v1/trace.pb.go#L319
- https://github.com/w3c/distributed-tracing/blob/master/trace_context/overview.md

```
// This field conveys information about request position in multiple distributed tracing graphs.
// It is a list of Tracestate.Entry with a maximum of 32 members in the list.
//
// See the https://github.com/w3c/distributed-tracing for more details about this field.
```

> Trace context is represented by a set of name/value pairs describing the identity of every http request. Two propagation fields carry the common and vendor-specific properties that make up the trace context.
>
> - **`traceparent` describes the position of the incoming request in its trace graph in a portable, fixed-length format**. Its design focuses on fast parsing.
> - **`tracestate` maps all graphs the incoming parent is a part of in potentially vendor-specific formats**. For example, if a request crosses tracing systems, there will be one entry in `tracestate` for each system.
>
> Notably, the `tracestate` field is unreliant on data in the `traceparent`.
>
> Libraries and platforms MUST propagate `traceparent` and `tracestate` headers to guarantee that trace will not be broken.


## IDL

### sidecar



## GoDaddy

- https://sg.godaddy.com/zh/help/accessing-the-domain-control-center-416

## S3 + Bucket

- A `bucket` is a container for objects stored in Amazon S3. When creating a bucket, you can choose a Region to optimize for latency, minimize costs, or address regulatory requirements.
- [s3 console](https://console.aws.amazon.com/s3/home?region=us-west-1)

## Route 53 + Hosted Zone + domain

- Amazon Route 53 is a highly available and scalable DNS service.
- A **hosted zone** tells Route 53 how to respond to DNS queries for a domain such as example.com.
- A **hosted zone** is a container that holds information about how you want to route traffic for a domain, such as example.com, and its subdomains.
- Creating a Kubernetes cluster using Kops requires a top-level domain or a sub domain and setting up Route 53 hosted zones. This domain allows the worker nodes to discover the master and the master to discover all the etcd servers.
- A **public hosted zone** determines how traffic is routed on the Internet.
- A **private hosted zone** determines how traffic is routed within an Amazon VPC. Your resources are not accessible outside the VPC. You can use any domain name.
- Record sets are associated with a given hosted zone.
- Create a hosted zone for your domain (e.g. example.com) using Route 53 service.
- 在 Create Hosted Zone 时需要指定 Domain Name ，之后在该 hosted zone 中的所有 record sets 都会包含该 domain name ；例如 domain name 指定为 example.com ，则 record set 为 www.example.com 这样的形式；
- 在 Create Hosted Zone 时需要指定 Type ，其中
	- Choose Public Hosted Zone if you want Route 53 to respond to Internet DNS queries for your domain.
	- Choose Private Hosted Zone if you want Route 53 to respond only to queries within an Amazon VPC.
- 在 Create Hosted Zone 后，Route 53 会自动分配四个 Name Servers 给该 hosted zone ；
- 在 Create Hosted Zone 后，会自动创建 NS 和 SOA 两种类型的 record type ；
- [route53 console](https://console.aws.amazon.com/route53/home?region=us-west-1)

## kops

- `kops` is short for Kubernetes Operations.
- This is the easiest way to get a highly-available Kubernetes cluster up and running. 
- The `kubectl` script is the CLI for running commands against running clusters. Think of `kops` as `kubectl` for cluster.
- Creating a Kubernetes cluster using Kops requires a top-level domain or a sub domain and setting up Route 53 hosted zones. This domain allows the worker nodes to discover the master and the master to discover all the etcd servers. This is also needed for `kubectl` to be able to talk directly with the master.
- **Kops 1.6.2** adds an experimental support for gossip-based, uses **Weave Mesh**, discovery of nodes. This makes the process of setting up Kubernetes cluster using Kops **DNS-free**, and much more simplified.


## CRDT

- [谈谈CRDT](http://liyu1981.github.io/what-is-CRDT/?utm_source=tuicool&utm_medium=referral)

CRDT 是 Conflict-Free Replicated Data Types 的缩写，直译的话即“无冲突可复制数据类型”。

## Gossip

- [gossip 协议](https://github.com/moooofly/MarkSomethingDown/blob/master/nonsense/gossip%20%E5%8D%8F%E8%AE%AE.md)
- [weaveworks/mesh](https://github.com/weaveworks/mesh)
- [Gossip-based Kubernetes Cluster on AWS using Kops](http://blog.arungupta.me/gossip-kubernetes-aws-kops/)
- [Notes on gossip support of kops](https://github.com/kubernetes/kops/blob/master/docs/development/gossip.md)

## Bastion

- [Bastion in Kops](https://github.com/kubernetes/kops/blob/master/docs/bastion.md)
- [Linux Bastion Hosts on the AWS Cloud](https://docs.aws.amazon.com/quickstart/latest/linux-bastion/architecture.html)

## 参考

- [Multimaster Kubernetes Cluster on Amazon Using Kops](http://blog.arungupta.me/multimaster-kubernetes-cluster-amazon-kops/)
- [Gossip-based Kubernetes Cluster on AWS using Kops](http://blog.arungupta.me/gossip-kubernetes-aws-kops/)
- [Kubernetes Containerd Integration Goes GA](https://kubernetes.io/blog/2018/05/24/kubernetes-containerd-integration-goes-ga/)


