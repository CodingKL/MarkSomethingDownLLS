# 流利说工作相关信息搜集

## redis

### 端口使用

端口是 19000 的是 codis, 端口是 6379 的是 aws elastic cache

### 数据淘汰机制的使用情况

- 如果是 redis 集群的话，我们使用的是 codis ：
    - 如果是缓存类的，淘汰策略是 `allkeys-lru`
    - 如果是持久化类的，策略是 `volatile-lru`(根据 TTL 过期)
- 如果 redis 是单机的话，使用的是 aws elastic cache ，默认策略是 `volatile-lru`

### 数据丢失问题

扩容的时候

- codis 不中断业务，不丢失数据；
- aws elastic cache 中断业务，不丢失数据；

断电情况两种都有可能丢失；


### 通过 redis INFO 查看信息

> ip 和 port 你要换成你需要访问的

```
$ (printf "INFO\r\n"; sleep 1) | nc 172.31.14.102 19000 | grep maxmemory
maxmemory:7516192768
maxmemory_human:7.00G
maxmemory_policy:volatile-lru
```
